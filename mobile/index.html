<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>בינגו פסח</title>
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      font-family: 'Varela Round', sans-serif;
      background: linear-gradient(to right, #fff1eb, #ace0f9);
      margin: 0;
      padding: 0;
      text-align: center;
    }

    #main {
      padding: 20px;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      color: #333;
    }

    #board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      max-width: 95vw;
      margin: 0 auto 20px;
    }

    [id^="cell"] {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1em;
      padding: 10px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.3s;
      user-select: none;
    }

    [id^="cell"].marked {
      background-color: #a2f5b5;
      position: relative;
    }

    [id^="cell"].marked::after {
      content: '\2713';
      position: absolute;
      font-size: 2em;
      color: #2d6a4f;
    }

    button {
      margin: 5px;
      padding: 12px 20px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    #bingoMessage {
      font-size: 2em;
      color: #d00000;
      margin-top: 20px;
      display: none;
    }

    @media (max-width: 600px) {
      [id^="cell"] {
        min-height: 50px;
        font-size: 0.9em;
        padding: 5px;
      }
    }
  </style>
</head>
<body>
<div id="main">
  <h1>בינגו פסח</h1>
  <div id="board">
    <!-- Cells will be generated by JS -->
  </div>
  <div class="no-print">
    <button onclick="fillTable(shuffle(events))">כרטיס חדש</button>
    <button onclick="addToList()">הוספה</button>
    <button onclick="window.print()">הדפסה</button>
    <div id="list"></div>
    <div id="bingoMessage">בינגו!</div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
const events = [
  "אליהו דופק בדלת", "נשפכת כוס יין ראשונה", "נשפכת כוס מיץ ראשונה", "נשברת כוס",
  "עשר המכות", "הלחמניה", "אוכלים חרוסת", "כוס ראשונה", "כוס שניה", "כוס שלישית",
  "כוס רביעית", "אחד מי יודע", "חד גדיא", "קדש", "רחץ", "כרפס", "יחץ", "מגיד", "רחצה",
  "מוציא מצה", "מרור", "כורך", "שולחן עורך", "צפון", "ברך", "הלל", "נרצה",
  "ויכוח על סלט מיונז או תפוח אדמה"
];

function createBoard() {
  $('#board').empty();
  for (let i = 1; i <= 25; i++) {
    const cellId = i === 13 ? 'cell13' : 'cell' + (i > 13 ? i + 1 : i);
    const isCenter = i === 13;
    const cell = $(`<div id="${cellId}" class="cell">${isCenter ? 'פסח!!!' : ''}</div>`);
    $('#board').append(cell);
  }
  $('[id^="cell"]').on('click', function() {
    if (!$(this).hasClass('marked') && !$(this).text().includes('פסח')) {
      $(this).addClass('marked');
      checkBingo();
    }
  });
}

function fillTable(arr) {
  createBoard();
  let ev = arr.slice();
  for (let i = 1; i < 27; i++) {
    if (i === 13) continue;
    const item = ev.pop();
    $("#cell" + i).html(`<p class='innerCell'>${item}</p>`);
  }
  $("#bingoMessage").hide();
}

function addToList() {
  const item = window.prompt("בינגו פסח", "");
  if (item && item.trim() !== "") {
    events.push(item.trim());
  }
}

function shuffle(array) {
  let currentIndex = array.length, temporaryValue, randomIndex;
  while (0 !== currentIndex) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}

function checkBingo() {
  const size = 5;
  let bingo = false;
  for (let r = 0; r < size; r++) {
    let row = true;
    for (let c = 0; c < size; c++) {
      const cellNum = r * size + c + 1;
      if (cellNum === 13) continue;
      const id = "cell" + (cellNum < 13 ? cellNum : cellNum + 1);
      if (!$(`#${id}`).hasClass('marked')) {
        row = false;
        break;
      }
    }
    if (row) {
      bingo = true;
      break;
    }
  }
  if (bingo) {
    $('#bingoMessage').fadeIn();
    confetti({
      particleCount: 150,
      spread: 100,
      origin: { y: 0.6 }
    });
  }
}

$(function () {
  fillTable(shuffle(events));
});
</script>
</body>
</html>
